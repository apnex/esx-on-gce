{
  "version": 4,
  "terraform_version": "1.2.8",
  "serial": 10,
  "lineage": "b9735a30-3600-2d8d-629f-8e9eb75d9144",
  "outputs": {
    "controller_connect_ip": {
      "value": "35.189.62.220",
      "type": "string"
    },
    "controller_ssh_key": {
      "value": "./state/lab01-controller.key",
      "type": "string"
    },
    "ssh_cmd": {
      "value": "ssh -o StrictHostKeyChecking=no -i ./state/lab01-controller.key root@35.189.62.220",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "vsphere_datacenter",
      "name": "datacenter",
      "provider": "provider[\"registry.terraform.io/hashicorp/vsphere\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ha-datacenter",
            "name": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "vsphere_host",
      "name": "esx",
      "provider": "provider[\"registry.terraform.io/hashicorp/vsphere\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "datacenter_id": "ha-datacenter",
            "id": "ha-host",
            "name": null,
            "resource_pool_id": "ha-root-pool"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "vsphere_network",
      "name": "uplink",
      "provider": "provider[\"registry.terraform.io/hashicorp/vsphere\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "datacenter_id": "ha-datacenter",
            "distributed_virtual_switch_uuid": null,
            "id": "HaNetwork-vss-uplink",
            "name": "vss-uplink",
            "type": "Network"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "vsphere_resource_pool",
      "name": "pool",
      "provider": "provider[\"registry.terraform.io/hashicorp/vsphere\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "datacenter_id": null,
            "id": "ha-root-pool",
            "name": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "script",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#!ipxe\nset mirror http://mirror.aarnet.edu.au/pub/centos/7/os/x86_64\nset boot http://pxe.apnex.io\nset kickstart ${boot}/centos.rke.ks\n\n#static\nifopen net0\nset net0/ip 10.52.2.2\nset net0/netmask 255.255.255.0\nset net0/gateway 10.52.2.1\nset dns 8.8.8.8\necho ADDRESS-: ${net0/ip}\necho NETMASK-: ${net0/netmask}\necho GATEWAY-: ${net0/gateway}\necho DNS-----: ${dns}\nkernel ${mirror}/images/pxeboot/vmlinuz initrd=initrd.img ks=${kickstart} ksdevice=eth0 net.ifnames=0 biosdevname=0 ip=${net0/ip}::${net0/gateway}:${net0/netmask}:centos:eth0:none nameserver=${dns}\ninitrd ${mirror}/images/pxeboot/initrd.img\nboot\n",
            "content_base64": null,
            "content_base64sha256": "bQW9Z7bDqOPaGewn+NmjH03vWP4O36rHRkgrZ+y4P74=",
            "content_base64sha512": "9m73EnQxDijlPSdPh+JcVgna8K4N/U/s1snps0C2jVQCSefYsKSFRe9RsgCB2CV1RyTrmA+Lz85AZkHFGpJ6Hw==",
            "content_md5": "3ddf0e15bf2663799889181878a2bed4",
            "content_sha1": "121884206e4c9b24964c35aa7baa82361d672f31",
            "content_sha256": "6d05bd67b6c3a8e3da19ec27f8d9a31f4def58fe0edfaac746482b67ecb83fbe",
            "content_sha512": "f66ef71274310e28e53d274f87e25c5609daf0ae0dfd4fecd6c9e9b340b68d540249e7d8b0a48545ef51b20081d825754724eb980f8bcfce406641c51a927a1f",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./state/centos.ipxe",
            "id": "121884206e4c9b24964c35aa7baa82361d672f31",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.bootiso",
      "mode": "managed",
      "type": "local_file",
      "name": "dockerfile",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "FROM alpine:3.4\nRUN set -xe \\\n\t\u0026\u0026 apk --update --no-cache add --virtual build-dependencies \\\n\t\tbinutils \\\n\t\tgcc \\\n\t\tgit \\\n\t\tmake \\\n\t\tmusl \\\n\t\tmusl-dev \\\n\t\tmusl-utils \\\n\t\tperl \\\n\t\tsyslinux \\\n\t\txorriso \\\n\t\txz-dev \\\n\t\u0026\u0026 git clone https://github.com/ipxe/ipxe /usr/src/ipxe \\\n\t\u0026\u0026 sed -i /usr/src/ipxe/src/config/console.h \\\n\t\t-e 's|//#define[ \\t]\\+CONSOLE_FRAMEBUFFER|#define\\t\\tCONSOLE_FRAMEBUFFER|' \\\n\t\u0026\u0026 sed -i /usr/src/ipxe/src/config/general.h \\\n\t\t-e 's|//#undef[ \\t]\\+SANBOOT_PROTO_ISCSI|#define\\t\\tSANBOOT_PROTO_ISCSI|' \\\n\t\t-e 's|//#define[ \\t]\\+IMAGE_SCRIPT|#define\\t\\tIMAGE_SCRIPT|' \\\n\t\t-e 's|//#define[ \\t]\\+CONSOLE_CMD|#define CONSOLE_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+NEIGHBOUR_CMD|#define NEIGHBOUR_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+NSLOOKUP_CMD|#define NSLOOKUP_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+PING_CMD|#define PING_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+POWEROFF_CMD|#define POWEROFF_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+REBOOT_CMD|#define REBOOT_CMD|' \\\n\t\t-e 's|//#define[ \\t]\\+NTP_CMD|#define NTP_CMD|'\nCOPY centos.ipxe /tmp/\nRUN make -C /usr/src/ipxe/src bin/ipxe.iso EMBED=/tmp/centos.ipxe\n",
            "content_base64": null,
            "content_base64sha256": "ED0UjJEQy+xr/lPkMWtjk7EX0qvh6vDcnXKRoThpFX4=",
            "content_base64sha512": "ja6Cl5Mj/YdBWC5CCJ41gM1g/UD/OEx/kKwUd7rRYo9+xje5cRn9jVRM4f5krsEoPXDUHf19mVwDsNeK3Qmi5Q==",
            "content_md5": "c39e8357d5bd5892b256811d2d25a0b2",
            "content_sha1": "7c4f8ac647baed7ccee16217903ae788a8acf51a",
            "content_sha256": "103d148c9110cbec6bfe53e4316b6393b117d2abe1eaf0dc9d7291a13869157e",
            "content_sha512": "8dae82979323fd8741582e42089e3580cd60fd40ff384c7f90ac1477bad1628f7ec637b97119fd8d544ce1fe64aec1283d70d41dfd7d995c03b0d78add09a2e5",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/bootiso/ipxe-builder.docker",
            "id": "7c4f8ac647baed7ccee16217903ae788a8acf51a",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "local_file.script",
            "module.bootiso.null_resource.script"
          ]
        }
      ]
    },
    {
      "module": "module.bootiso",
      "mode": "managed",
      "type": "null_resource",
      "name": "compile-boot-iso",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "status": "tainted",
          "schema_version": 0,
          "attributes": {
            "id": "320877471952817842",
            "triggers": {
              "always_run": "2023-06-29T02:16:16Z",
              "dockerfile": "modules/bootiso/ipxe-builder.docker",
              "path": "./state/boot.iso",
              "state": "./state"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "local_file.script",
            "module.bootiso.local_file.dockerfile",
            "module.bootiso.null_resource.script"
          ]
        }
      ]
    },
    {
      "module": "module.bootiso",
      "mode": "managed",
      "type": "null_resource",
      "name": "script",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2003209884573896120",
            "triggers": {
              "scriptdst": "modules/bootiso/centos.ipxe",
              "scriptsrc": "./state/centos.ipxe"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "local_file.script"
          ]
        }
      ]
    }
  ]
}
